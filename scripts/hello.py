# -*- coding: utf-8 -*-
# Author:马海杰
# Email:mahaijie123@163.com
# 执行方法：python manage.py runscript hello
# 需要安装django-extensions，pip install django-extensions

import datetime
import os
import threading
import time

def getData(ip):
    try:
        print "ip %s start run%s" % (ip,datetime.datetime.now())

        time.sleep(1)
        print "ip %s stop run%s" % (ip,datetime.datetime.now())
    except Exception, e:
        print '%s\t run fail,fail reason\r\n%s' % (ip,e)



def run():
    iplist = ['192.168.1.100',
              '192.168.1.101',
              '192.168.1.102',
              '192.168.1.103',
              '192.168.1.104',
              '192.168.1.105',
              '192.168.1.106',
              '192.168.1.107',
              '192.168.1.108',
              '192.168.1.109',
              '192.168.1.110',
              '192.168.1.111',
              '192.168.1.112',
              '192.168.1.113',
              '192.168.1.114',
              '192.168.1.115',
              '192.168.1.116',
              '192.168.1.117',
              '192.168.1.118',
              '192.168.1.119',
              '192.168.1.120',
              '192.168.1.121',
              '192.168.1.101',
              '192.168.1.102',
              '192.168.1.103',
              '192.168.1.104',
              '192.168.1.105',
              '192.168.1.106',
              '192.168.1.107',
              '192.168.1.108',
              '192.168.1.109',
              '192.168.1.110',
              '192.168.1.111',
              '192.168.1.112',
              '192.168.1.113',
              '192.168.1.114',
              '192.168.1.115',
              '192.168.1.116',
              '192.168.1.117',
              '192.168.1.118',
              '192.168.1.119',
              '192.168.1.120',
              '192.168.1.101',
              '192.168.1.102',
              '192.168.1.103',
              '192.168.1.104',
              '192.168.1.105',
              '192.168.1.106',
              '192.168.1.107',
              '192.168.1.108',
              '192.168.1.109',
              '192.168.1.110',
              '192.168.1.111',
              '192.168.1.112',
              '192.168.1.113',
              '192.168.1.114',
              '192.168.1.115',
              '192.168.1.116',
              '192.168.1.117',
              '192.168.1.118',
              '192.168.1.119',
              '192.168.1.120',
              '192.168.1.101',
              '192.168.1.102',
              '192.168.1.103',
              '192.168.1.104',
              '192.168.1.105',
              '192.168.1.106',
              '192.168.1.107',
              '192.168.1.108',
              '192.168.1.109',
              '192.168.1.110',
              '192.168.1.111',
              '192.168.1.112',
              '192.168.1.113',
              '192.168.1.114',
              '192.168.1.115',
              '192.168.1.116',
              '192.168.1.117',
              '192.168.1.118',
              '192.168.1.119',
              '192.168.1.120',
              '192.168.1.101',
              '192.168.1.102',
              '192.168.1.103',
              '192.168.1.104',
              '192.168.1.105',
              '192.168.1.106',
              '192.168.1.107',
              '192.168.1.108',
              '192.168.1.109',
              '192.168.1.110',
              '192.168.1.111',
              '192.168.1.112',
              '192.168.1.113',
              '192.168.1.114',
              '192.168.1.115',
              '192.168.1.116',
              '192.168.1.117',
              '192.168.1.118',
              '192.168.1.119',
              '192.168.1.120',
             ]

    threads = []

    print "pro start %s" % datetime.datetime.now()

    for ip in iplist:
        th = threading.Thread(target=getData, args=(ip,))
        th.start()
        threads.append(th)

    for th in threads:
        th.join()

    print "pro end %s" % datetime.datetime.now()

